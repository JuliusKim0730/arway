# 📋 남은 개발 작업 정리

**작성일**: 2025-12-22  
**프로젝트 상태**: MVP 95% 완료, 테스트 및 배포 준비 단계

---

## 🎯 우선순위별 작업 목록

### 🔴 P0 - 즉시 필요 (배포 전 필수)

#### 1. 배포 환경 설정 확인 및 테스트
**상태**: ⚠️ 진행 중  
**예상 시간**: 1-2시간

- [ ] **Vercel 환경 변수 설정**
  - `NEXT_PUBLIC_API_URL` = Render 백엔드 URL
  - `NEXT_PUBLIC_GOOGLE_MAPS_API_KEY` 확인
  - `NEXTAUTH_URL`, `NEXTAUTH_SECRET` 확인
  - `GOOGLE_CLIENT_ID`, `GOOGLE_CLIENT_SECRET` 확인

- [ ] **Render 백엔드 설정 확인**
  - `CORS_ORIGINS`에 실제 Vercel 도메인 포함 확인
  - `DATABASE_URL` (Supabase) 확인
  - `SUPABASE_URL`, `SUPABASE_SERVICE_ROLE_KEY` 확인

- [ ] **Google OAuth 설정 업데이트**
  - Google Cloud Console에서 승인된 JavaScript 원본 추가
  - 리디렉션 URI 추가 (`/api/auth/callback/google`)

- [ ] **배포 후 통합 테스트**
  - API 연결 테스트
  - CORS 에러 확인
  - 지도 로딩 확인
  - 로그인 기능 확인
  - AR 네비게이션 기능 확인

**참고 문서**: `PRODUCTION_DEPLOYMENT_CHECKLIST.md`

---

#### 2. 테스트 데이터 생성 및 검증
**상태**: ⚠️ 미완료  
**예상 시간**: 30분

- [ ] **SCQ 테스트 데이터 생성**
  ```bash
  cd backend
  python app/database/seed_scq_data.py
  ```

- [ ] **생성된 데이터 확인**
  - 건물 데이터 확인
  - 지오펜스 데이터 확인
  - 실내 맵 데이터 확인
  - POI 데이터 확인

- [ ] **API 엔드포인트 테스트**
  ```bash
  curl "http://localhost:8000/api/v1/buildings"
  curl "http://localhost:8000/api/v1/geofences?lat=37.4979&lng=127.0276&radius=1000"
  curl "http://localhost:8000/api/v1/pois?lat=37.4979&lng=127.0276&radius=100"
  ```

**참고 문서**: `docs/SCQ_테스트_데이터_생성_가이드.md`

---

#### 3. 백엔드 서버 실행 및 API 테스트
**상태**: ⚠️ 미완료  
**예상 시간**: 1시간

- [ ] **백엔드 서버 실행**
  ```bash
  cd backend
  python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
  ```

- [ ] **API 엔드포인트 테스트**
  - 헬스 체크: `/health`
  - SCQ API: `/api/v1/buildings`, `/api/v1/geofences`, `/api/v1/pois`
  - 기존 API: `/api/v1/destinations`, `/api/v1/favorites`

- [ ] **에러 처리 확인**
  - 잘못된 요청에 대한 에러 응답 확인
  - CORS 설정 확인

**참고 문서**: `백엔드_서버_실행_가이드.md`

---

#### 4. 프론트엔드 통합 테스트
**상태**: ⚠️ 미완료  
**예상 시간**: 2시간

- [ ] **로컬 개발 서버 실행**
  ```bash
  cd frontend
  npm run dev
  ```

- [ ] **기능별 테스트**
  - [ ] 지도 로딩 (Google Maps)
  - [ ] 현재 위치 표시 (GPS)
  - [ ] 목적지 검색 (Google Places API)
  - [ ] 경로 계산
  - [ ] AR 네비게이션 시작
  - [ ] SCQ 기능 (실내/실외 전환, POI 인식)

- [ ] **SCQ 시나리오 테스트**
  - 실외 네비게이션 → 실내 진입 감지
  - 실내 모드 전환 확인
  - POI 인식 및 표시 확인
  - 실내 위치 추정 동작 확인

**참고 문서**: `다음_단계_작업_가이드.md`

---

### 🟡 P1 - 중요 (배포 후 개선)

#### 5. 실제 기기 테스트 준비
**상태**: ❌ 미완료  
**예상 시간**: 2-3시간

- [ ] **HTTPS 설정**
  - ngrok 또는 localtunnel 사용
  - 모바일 기기에서 접속 가능한 HTTPS URL 생성

- [ ] **모바일 기기 테스트**
  - iOS Safari 테스트
  - Android Chrome 테스트
  - 카메라 권한 요청 확인
  - GPS 권한 요청 확인
  - AR 네비게이션 동작 확인

- [ ] **디버깅 도구 설정**
  - Chrome DevTools 원격 디버깅
  - 콘솔 로그 확인
  - 네트워크 요청 모니터링

**참고 문서**: `다음_단계_작업_가이드.md` (6번 항목)

---

#### 6. 에러 핸들링 개선
**상태**: ⚠️ 부분 완료  
**예상 시간**: 2-3시간

- [ ] **오프라인 상태 알림 개선**
  - `frontend/app/ar-nav/arrived/page.tsx`의 TODO 주석 처리
  - 사용자에게 명확한 오프라인 상태 알림 추가

- [ ] **에러 알림 개선**
  - `frontend/app/ar-nav/arrived/page.tsx`의 TODO 주석 처리
  - 사용자 친화적인 에러 메시지 추가

- [ ] **SCQ Units 실패 시 Fallback 로직**
  - Unit 실패 시 기본 동작으로 전환
  - 네트워크 오류 처리 강화

**파일**: `frontend/app/ar-nav/arrived/page.tsx` (라인 75, 80)

---

#### 7. 로깅 및 모니터링 개선
**상태**: ⚠️ 부분 완료  
**예상 시간**: 2-3시간

- [ ] **SCQ 실행 로그 추가**
  - 각 Unit 실행 시간 로깅
  - 성공/실패 상태 로깅
  - 입력/출력 데이터 로깅 (디버그 모드)

- [ ] **성능 메트릭 수집**
  - GPS 업데이트 주기 측정
  - 지도 렌더링 시간 측정
  - API 응답 시간 측정

- [ ] **에러 추적 개선**
  - 에러 발생 시 상세 정보 로깅
  - 사용자 액션 컨텍스트 포함

---

#### 8. UI/UX 개선
**상태**: ⚠️ 부분 완료  
**예상 시간**: 3-4시간

- [ ] **실내 모드 전환 애니메이션**
  - 부드러운 전환 효과 추가
  - 시각적 피드백 개선

- [ ] **POI 목록 스크롤 개선**
  - 무한 스크롤 또는 페이지네이션
  - 로딩 상태 표시

- [ ] **마커 표시 개선**
  - 현재 위치 마커 시각적 개선 (완료)
  - 출발/도착 마커 구분 개선 (완료)

- [ ] **검색 결과 UI 개선**
  - 검색 결과 로딩 상태 개선 (완료)
  - 검색 결과 없을 때 안내 메시지 개선 (완료)

---

### 🟢 P2 - 선택사항 (향후 개선)

#### 9. SCQ Unit #5 구현 (Safety/Obstacle/Congestion)
**상태**: ❌ 미구현 (선택사항)  
**예상 시간**: 1-2주

- [ ] **기본 구조 구현**
  - `unit5_safety.ts` 파일 생성
  - 기본 인터페이스 구현

- [ ] **장애물 감지 로직**
  - 카메라 프레임 분석
  - 장애물 인식 (OpenCV 또는 ML 모델)

- [ ] **혼잡도 감지**
  - 사람 수 추정
  - 혼잡도 레벨 계산

- [ ] **안전 알림 시스템**
  - 위험 상황 감지 시 알림
  - 경로 재계산 제안

**참고**: PRD에 따르면 선택사항이지만, 향후 안전 기능 강화 시 필요

---

#### 10. 실내 맵 편집 도구 개발
**상태**: ❌ 미구현  
**예상 시간**: 2-3주

- [ ] **웹 기반 맵 편집기**
  - 건물 추가/수정/삭제
  - 실내 구역 편집
  - 랜드마크 추가/수정
  - POI 추가/수정

- [ ] **관리자 대시보드 통합**
  - 기존 관리자 대시보드에 맵 편집 기능 추가
  - 권한 관리

---

#### 11. VPS 통합 (Visual Positioning System)
**상태**: ❌ 미구현  
**예상 시간**: 3-4주

- [ ] **ARCore Geospatial API 통합**
  - 실내 위치 추정 정확도 향상
  - 카메라 기반 위치 추정

- [ ] **실내 위치 추정 개선**
  - 현재: GPS + 카메라 기반 추정
  - 개선: VPS 기반 고정밀 위치 추정

---

#### 12. AR 렌더링 개선
**상태**: ⚠️ 기본 구현 완료  
**예상 시간**: 2-3주

- [ ] **Three.js 기반 AR 오버레이**
  - 3D 화살표 및 안내 표시
  - POI 3D 마커 표시

- [ ] **WebXR 통합**
  - AR 모드 지원
  - VR 모드 지원 (선택사항)

---

## 📊 진행 상황 요약

### 완료된 작업 (✅)
- [x] GPS 정확도 개선
- [x] 현재 위치 마커 표시
- [x] 지도 클릭 시 출발/도착 마커 표시
- [x] 검색 결과 표시 문제 해결
- [x] SCQ Intelligence Layer 기본 구현
- [x] 데이터베이스 마이그레이션
- [x] 백엔드 API 엔드포인트 구현
- [x] 프론트엔드 SCQ 통합

### 진행 중인 작업 (⚠️)
- [ ] 배포 환경 설정 확인
- [ ] 테스트 데이터 생성
- [ ] 통합 테스트
- [ ] 에러 핸들링 개선
- [ ] 로깅 개선
- [ ] UI/UX 개선

### 미완료 작업 (❌)
- [ ] 실제 기기 테스트
- [ ] SCQ Unit #5 구현 (선택사항)
- [ ] 실내 맵 편집 도구
- [ ] VPS 통합
- [ ] AR 렌더링 개선

---

## 🎯 즉시 실행 가능한 작업

### 오늘 할 수 있는 작업 (2-3시간)

1. **테스트 데이터 생성** (30분)
   ```bash
   cd backend
   python app/database/seed_scq_data.py
   ```

2. **백엔드 서버 실행 및 테스트** (1시간)
   ```bash
   cd backend
   python -m uvicorn app.main:app --reload
   # 새 터미널에서 API 테스트
   ```

3. **프론트엔드 통합 테스트** (1-2시간)
   ```bash
   cd frontend
   npm run dev
   # 브라우저에서 테스트
   ```

### 이번 주 할 수 있는 작업 (5-8시간)

4. **배포 환경 설정 및 테스트** (2-3시간)
5. **에러 핸들링 개선** (2-3시간)
6. **로깅 개선** (1-2시간)

---

## 📝 체크리스트

### Phase 1: 배포 준비 (오늘)
- [ ] 테스트 데이터 생성
- [ ] 백엔드 서버 실행 및 API 테스트
- [ ] 프론트엔드 통합 테스트
- [ ] 배포 환경 변수 설정 확인

### Phase 2: 배포 및 검증 (이번 주)
- [ ] Vercel 배포 확인
- [ ] Render 배포 확인
- [ ] 배포 후 통합 테스트
- [ ] CORS 및 API 연결 확인

### Phase 3: 개선 작업 (다음 주)
- [ ] 에러 핸들링 개선
- [ ] 로깅 개선
- [ ] UI/UX 개선
- [ ] 실제 기기 테스트 준비

### Phase 4: 향후 개선 (선택사항)
- [ ] SCQ Unit #5 구현
- [ ] 실내 맵 편집 도구
- [ ] VPS 통합
- [ ] AR 렌더링 개선

---

## 🚀 다음 단계

**즉시 시작할 작업**:
1. 테스트 데이터 생성
2. 백엔드 서버 실행 및 API 테스트
3. 프론트엔드 통합 테스트

**참고 문서**:
- `다음_단계_작업_가이드.md` - 상세 작업 가이드
- `PRODUCTION_DEPLOYMENT_CHECKLIST.md` - 배포 체크리스트
- `백엔드_서버_실행_가이드.md` - 백엔드 실행 가이드

---

**작성일**: 2025-12-22  
**마지막 업데이트**: 2025-12-22

