# 🚀 개발 환경 실행 가이드

## ✅ 빠른 시작 (3단계)

### 1️⃣ 백엔드 서버 실행

**터미널 1**에서 실행:

```powershell
cd backend

# 가상환경 활성화 (처음 한 번만)
python -m venv venv
.\venv\Scripts\activate

# 의존성 설치 (처음 한 번만)
pip install -r requirements.txt

# 서버 실행
python -m uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
```

**성공 확인**:
- ✅ `Uvicorn running on http://0.0.0.0:8000`
- ✅ API 문서: http://localhost:8000/docs

---

### 2️⃣ 프론트엔드 서버 실행

**터미널 2** (새 터미널)에서 실행:

```powershell
cd frontend

# 의존성 설치 (처음 한 번만)
npm install

# 개발 서버 실행
npm run dev
```

**성공 확인**:
- ✅ `Local: http://localhost:3000`
- ✅ 브라우저에서 http://localhost:3000 접속

---

### 3️⃣ 브라우저에서 테스트

1. **메인 페이지**: http://localhost:3000
2. **AR 네비게이션**: http://localhost:3000/ar-nav
3. **목적지 선택**: http://localhost:3000/ar-nav/select

---

## ⚙️ 환경 변수 설정

### 백엔드 환경 변수 (`backend/.env`)

```env
# 데이터베이스 (Supabase 사용 시)
DATABASE_URL=postgresql://user:password@host:5432/dbname

# 또는 로컬 PostgreSQL
# DATABASE_URL=postgresql://arway_user:password@localhost:5432/arway_lite

# CORS 설정
CORS_ORIGINS=http://localhost:3000,http://localhost:3001
```

### 프론트엔드 환경 변수 (`frontend/.env.local`)

```env
# API URL
NEXT_PUBLIC_API_URL=http://localhost:8000

# NextAuth
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-secret-key-here

# Google OAuth (선택사항)
GOOGLE_CLIENT_ID=your-google-client-id
GOOGLE_CLIENT_SECRET=your-google-client-secret

# Google Maps API (선택사항)
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# Tmap API (한국 사용 시 필수)
NEXT_PUBLIC_TMAP_API_KEY=your-tmap-api-key
```

---

## 🧪 테스트 체크리스트

### 백엔드 테스트
- [ ] http://localhost:8000/docs 접속 가능
- [ ] http://localhost:8000/health 응답 확인
- [ ] API 엔드포인트 호출 테스트

### 프론트엔드 테스트
- [ ] http://localhost:3000 접속 가능
- [ ] 권한 동의 모달 표시 확인
- [ ] GPS 위치 정보 수신 확인
- [ ] 카메라 권한 요청 확인
- [ ] 지도 표시 확인 (Google Maps 또는 Tmap)

---

## 🐛 문제 해결

### 백엔드 서버가 시작되지 않음

**문제**: `ModuleNotFoundError` 또는 `ImportError`

**해결**:
```powershell
cd backend
pip install -r requirements.txt
```

### 프론트엔드 빌드 오류

**문제**: `npm run dev` 실행 시 오류

**해결**:
```powershell
cd frontend
rm -rf node_modules package-lock.json
npm install
npm run dev
```

### 포트 충돌

**문제**: `Port 8000 is already in use` 또는 `Port 3000 is already in use`

**해결**:
```powershell
# Windows - 포트 사용 중인 프로세스 확인
netstat -ano | findstr :8000
netstat -ano | findstr :3000

# 프로세스 종료
taskkill /PID <PID번호> /F
```

### 데이터베이스 연결 실패

**문제**: `Connection refused` 또는 `Authentication failed`

**해결**:
1. Supabase 연결 정보 확인 (`backend/.env`의 `DATABASE_URL`)
2. 로컬 PostgreSQL 사용 시:
   ```powershell
   # PostgreSQL 서비스 시작 확인
   # Windows: 서비스 관리자에서 확인
   ```

### GPS 권한 오류

**문제**: 위치 정보를 받을 수 없음

**해결**:
- 브라우저에서 위치 권한 허용
- HTTPS 또는 localhost에서만 GPS API 사용 가능
- 개발 환경에서는 localhost 사용 권장

---

## 📝 개발 팁

### 핫 리로드
- **백엔드**: `--reload` 플래그로 자동 재시작
- **프론트엔드**: Next.js 기본 제공 (파일 저장 시 자동 새로고침)

### 디버깅
- **백엔드**: 콘솔에 로그 출력
- **프론트엔드**: 브라우저 개발자 도구 (F12) → Console 탭

### API 테스트
- **Swagger UI**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

---

## 🎯 다음 단계

1. ✅ 개발 서버 실행 완료
2. ✅ 브라우저에서 테스트
3. ✅ 기능 확인 및 디버깅
4. ✅ 변경사항 커밋 및 푸시

---

## 💡 참고사항

- **프로덕션 배포**: Vercel (프론트엔드) + Render (백엔드)
- **데이터베이스**: Supabase 사용 권장
- **환경 변수**: 프로덕션과 개발 환경 분리 필수

