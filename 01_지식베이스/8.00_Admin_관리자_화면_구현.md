---
title: "8.00 Admin ê´€ë¦¬ì í™”ë©´ êµ¬í˜„"
type: "implementation"
tags: ["admin", "dashboard", "analytics", "management"]
dependencies: ["nextjs", "react", "recharts", "react-table"]
---

# 8.00 Admin ê´€ë¦¬ì í™”ë©´ êµ¬í˜„

## ì›Œí¬í”Œë¡œìš° ê°œìš”

ê´€ë¦¬ìê°€ ì‹œìŠ¤í…œì„ ëª¨ë‹ˆí„°ë§í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” Admin ëŒ€ì‹œë³´ë“œë¥¼ êµ¬í˜„í•©ë‹ˆë‹¤.

## ëª©í‘œ

- ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ êµ¬í˜„
- ì„¸ì…˜ í†µê³„ ë° ë¶„ì„
- ëª©ì ì§€ ê´€ë¦¬ ê¸°ëŠ¥
- ì‚¬ìš©ì í™œë™ ëª¨ë‹ˆí„°ë§
- GPS ì¶”ì  ê²½ë¡œ ì‹œê°í™”

## ë‹¨ê³„ë³„ ì‘ì—…

### 8.1 ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ

#### 8.1.1 ë©”ì¸ ëŒ€ì‹œë³´ë“œ í˜ì´ì§€
`admin/app/page.tsx`:
```typescript
'use client';

import { useEffect, useState } from 'react';
import { fetchStats, fetchRecentSessions } from '@/lib/api';
import StatsCard from '@/components/StatsCard';
import SessionsTable from '@/components/SessionsTable';
import DestinationsList from '@/components/DestinationsList';

export default function AdminDashboard() {
  const [stats, setStats] = useState({
    totalSessions: 0,
    activeSessions: 0,
    completedSessions: 0,
    averageRating: 0,
  });
  const [recentSessions, setRecentSessions] = useState([]);
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    loadDashboardData();
  }, []);

  const loadDashboardData = async () => {
    try {
      const [statsData, sessionsData] = await Promise.all([
        fetchStats(),
        fetchRecentSessions(),
      ]);
      setStats(statsData);
      setRecentSessions(sessionsData);
      setLoading(false);
    } catch (err) {
      console.error('ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', err);
      setLoading(false);
    }
  };

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-100 flex items-center justify-center">
        <p>ë¡œë”© ì¤‘...</p>
      </div>
    );
  }

  return (
    <div className="min-h-screen bg-gray-100">
      <header className="bg-white shadow">
        <div className="max-w-7xl mx-auto px-4 py-6">
          <h1 className="text-3xl font-bold text-gray-900">ARWay Lite ê´€ë¦¬ì</h1>
        </div>
      </header>

      <main className="max-w-7xl mx-auto px-4 py-8">
        {/* í†µê³„ ì¹´ë“œ */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
          <StatsCard
            title="ì „ì²´ ì„¸ì…˜"
            value={stats.totalSessions}
            icon="ğŸ“Š"
          />
          <StatsCard
            title="í™œì„± ì„¸ì…˜"
            value={stats.activeSessions}
            icon="ğŸŸ¢"
          />
          <StatsCard
            title="ì™„ë£Œëœ ì„¸ì…˜"
            value={stats.completedSessions}
            icon="âœ…"
          />
          <StatsCard
            title="í‰ê·  í‰ì "
            value={stats.averageRating.toFixed(1)}
            icon="â­"
          />
        </div>

        {/* ìµœê·¼ ì„¸ì…˜ í…Œì´ë¸” */}
        <div className="bg-white rounded-lg shadow mb-8">
          <div className="p-6 border-b">
            <h2 className="text-xl font-semibold">ìµœê·¼ ì„¸ì…˜</h2>
          </div>
          <SessionsTable sessions={recentSessions} />
        </div>

        {/* ëª©ì ì§€ ê´€ë¦¬ */}
        <div className="bg-white rounded-lg shadow">
          <div className="p-6 border-b">
            <h2 className="text-xl font-semibold">ëª©ì ì§€ ê´€ë¦¬</h2>
          </div>
          <DestinationsList />
        </div>
      </main>
    </div>
  );
}
```

### 8.2 í†µê³„ ì»´í¬ë„ŒíŠ¸

#### 8.2.1 í†µê³„ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸
`admin/components/StatsCard.tsx`:
```typescript
interface StatsCardProps {
  title: string;
  value: string | number;
  icon: string;
}

export default function StatsCard({ title, value, icon }: StatsCardProps) {
  return (
    <div className="bg-white rounded-lg shadow p-6">
      <div className="flex items-center justify-between">
        <div>
          <p className="text-sm text-gray-600 mb-1">{title}</p>
          <p className="text-3xl font-bold text-gray-900">{value}</p>
        </div>
        <div className="text-4xl">{icon}</div>
      </div>
    </div>
  );
}
```

### 8.3 ì„¸ì…˜ í…Œì´ë¸” ì»´í¬ë„ŒíŠ¸

#### 8.3.1 ì„¸ì…˜ í…Œì´ë¸”
`admin/components/SessionsTable.tsx`:
```typescript
import Link from 'next/link';

interface Session {
  id: string;
  user_id: string;
  destination_id: string;
  status: string;
  started_at: string;
  completed_at?: string;
  total_distance?: number;
}

interface SessionsTableProps {
  sessions: Session[];
}

export default function SessionsTable({ sessions }: SessionsTableProps) {
  return (
    <div className="overflow-x-auto">
      <table className="min-w-full divide-y divide-gray-200">
        <thead className="bg-gray-50">
          <tr>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
              ì„¸ì…˜ ID
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
              ìƒíƒœ
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
              ì‹œì‘ ì‹œê°„
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
              ê±°ë¦¬
            </th>
            <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
              ì•¡ì…˜
            </th>
          </tr>
        </thead>
        <tbody className="bg-white divide-y divide-gray-200">
          {sessions.map((session) => (
            <tr key={session.id}>
              <td className="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
                {session.id.substring(0, 8)}...
              </td>
              <td className="px-6 py-4 whitespace-nowrap">
                <span
                  className={`px-2 py-1 text-xs font-semibold rounded-full ${
                    session.status === 'completed'
                      ? 'bg-green-100 text-green-800'
                      : session.status === 'active'
                      ? 'bg-blue-100 text-blue-800'
                      : 'bg-gray-100 text-gray-800'
                  }`}
                >
                  {session.status}
                </span>
              </td>
              <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                {new Date(session.started_at).toLocaleString('ko-KR')}
              </td>
              <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                {session.total_distance
                  ? `${(session.total_distance / 1000).toFixed(2)}km`
                  : '-'}
              </td>
              <td className="px-6 py-4 whitespace-nowrap text-sm font-medium">
                <Link
                  href={`/admin/sessions/${session.id}`}
                  className="text-blue-600 hover:text-blue-900"
                >
                  ìƒì„¸ë³´ê¸°
                </Link>
              </td>
            </tr>
          ))}
        </tbody>
      </table>
    </div>
  );
}
```

### 8.4 ëª©ì ì§€ ê´€ë¦¬ ì»´í¬ë„ŒíŠ¸

#### 8.4.1 ëª©ì ì§€ ë¦¬ìŠ¤íŠ¸
`admin/components/DestinationsList.tsx`:
```typescript
'use client';

import { useEffect, useState } from 'react';
import { fetchDestinations, createDestination, updateDestination } from '@/lib/api';

export default function DestinationsList() {
  const [destinations, setDestinations] = useState([]);
  const [showForm, setShowForm] = useState(false);
  const [formData, setFormData] = useState({
    name: '',
    description: '',
    latitude: '',
    longitude: '',
    address: '',
  });

  useEffect(() => {
    loadDestinations();
  }, []);

  const loadDestinations = async () => {
    try {
      const data = await fetchDestinations();
      setDestinations(data);
    } catch (err) {
      console.error('ëª©ì ì§€ ë¡œë“œ ì‹¤íŒ¨:', err);
    }
  };

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    try {
      await createDestination({
        ...formData,
        latitude: parseFloat(formData.latitude),
        longitude: parseFloat(formData.longitude),
        created_by: 'admin-user-id', // ì‹¤ì œë¡œëŠ” ì¸ì¦ëœ ì‚¬ìš©ì ID
      });
      setShowForm(false);
      setFormData({
        name: '',
        description: '',
        latitude: '',
        longitude: '',
        address: '',
      });
      loadDestinations();
    } catch (err) {
      console.error('ëª©ì ì§€ ìƒì„± ì‹¤íŒ¨:', err);
    }
  };

  return (
    <div className="p-6">
      <div className="flex justify-between items-center mb-4">
        <h3 className="text-lg font-semibold">ëª©ì ì§€ ëª©ë¡</h3>
        <button
          onClick={() => setShowForm(!showForm)}
          className="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700"
        >
          {showForm ? 'ì·¨ì†Œ' : 'ìƒˆ ëª©ì ì§€ ì¶”ê°€'}
        </button>
      </div>

      {showForm && (
        <form onSubmit={handleSubmit} className="mb-6 p-4 bg-gray-50 rounded">
          <div className="grid grid-cols-2 gap-4">
            <input
              type="text"
              placeholder="ì´ë¦„"
              value={formData.name}
              onChange={(e) => setFormData({ ...formData, name: e.target.value })}
              className="p-2 border rounded"
              required
            />
            <input
              type="text"
              placeholder="ì„¤ëª…"
              value={formData.description}
              onChange={(e) => setFormData({ ...formData, description: e.target.value })}
              className="p-2 border rounded"
            />
            <input
              type="number"
              step="any"
              placeholder="ìœ„ë„"
              value={formData.latitude}
              onChange={(e) => setFormData({ ...formData, latitude: e.target.value })}
              className="p-2 border rounded"
              required
            />
            <input
              type="number"
              step="any"
              placeholder="ê²½ë„"
              value={formData.longitude}
              onChange={(e) => setFormData({ ...formData, longitude: e.target.value })}
              className="p-2 border rounded"
              required
            />
            <input
              type="text"
              placeholder="ì£¼ì†Œ"
              value={formData.address}
              onChange={(e) => setFormData({ ...formData, address: e.target.value })}
              className="p-2 border rounded col-span-2"
            />
          </div>
          <button
            type="submit"
            className="mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700"
          >
            ì €ì¥
          </button>
        </form>
      )}

      <div className="space-y-2">
        {destinations.map((dest: any) => (
          <div key={dest.id} className="p-4 border rounded flex justify-between items-center">
            <div>
              <h4 className="font-semibold">{dest.name}</h4>
              <p className="text-sm text-gray-600">{dest.description}</p>
              <p className="text-xs text-gray-500">
                {dest.latitude}, {dest.longitude}
              </p>
            </div>
            <div className="flex gap-2">
              <button className="text-blue-600 hover:text-blue-800">ìˆ˜ì •</button>
              <button className="text-red-600 hover:text-red-800">ì‚­ì œ</button>
            </div>
          </div>
        ))}
      </div>
    </div>
  );
}
```

### 8.5 API í•¨ìˆ˜ ì¶”ê°€

#### 8.5.1 Admin API í•¨ìˆ˜
`admin/lib/api.ts`:
```typescript
const API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:8000';

export async function fetchStats() {
  const response = await fetch(`${API_URL}/api/v1/admin/stats`);
  return response.json();
}

export async function fetchRecentSessions(limit = 10) {
  const response = await fetch(`${API_URL}/api/v1/sessions/?limit=${limit}`);
  return response.json();
}
```

## ê²€ì¦ ì²´í¬ë¦¬ìŠ¤íŠ¸

- [ ] ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ ë ˆì´ì•„ì›ƒ êµ¬í˜„ ì™„ë£Œ
- [ ] í†µê³„ ì¹´ë“œ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„ ì™„ë£Œ
- [ ] ì„¸ì…˜ í…Œì´ë¸” êµ¬í˜„ ì™„ë£Œ
- [ ] ëª©ì ì§€ ê´€ë¦¬ ê¸°ëŠ¥ êµ¬í˜„ ì™„ë£Œ
- [ ] API ì—°ë™ ì™„ë£Œ
- [ ] ë°˜ì‘í˜• ë””ìì¸ ì ìš© ì™„ë£Œ

## ë‹¤ìŒ ë‹¨ê³„

ë‹¤ìŒ ì›Œí¬í”Œë¡œìš°: **9.00 í†µí•© í…ŒìŠ¤íŠ¸ ë° ë°°í¬**

## ì°¸ê³  ìë£Œ

- React Table: https://tanstack.com/table/latest
- Recharts: https://recharts.org/
- Admin Dashboard ë””ìì¸ íŒ¨í„´: https://tailwindui.com/components

