# 다음 단계 작업 가이드

**작성일**: 2025-12-22  
**현재 상태**: 마이그레이션 완료, 의존성 설치 완료 ✅

---

## ✅ 완료된 작업

1. ✅ 데이터베이스 마이그레이션 완료
2. ✅ 백엔드 의존성 설치 완료 (email-validator)
3. ✅ 프론트엔드 빌드 성공
4. ✅ 백엔드 모델/스키마 수정 완료

---

## 📋 다음 단계 작업

### 3. 테스트 데이터 생성 (우선순위: 높음)

#### 작업 내용
```bash
# 백엔드 디렉토리에서 실행
cd backend
python app/database/seed_scq_data.py
```

#### 생성되는 데이터
- ✅ 건물 1개 (테스트 백화점)
- ✅ 지오펜스 1개 (건물 경계)
- ✅ 실내 맵 1개 (1층)
- ✅ 실내 구역 1개 (로비)
- ✅ 랜드마크 1개 (에스컬레이터)
- ✅ 실내 POI 3개 (스타벅스, 화장실, 엘리베이터)
- ✅ 실외 POI 2개 (강남역, 편의점)

#### 확인 방법
```bash
# API로 데이터 확인
curl "http://localhost:8000/api/v1/buildings"
curl "http://localhost:8000/api/v1/geofences"
curl "http://localhost:8000/api/v1/pois"
```

---

### 4. 백엔드 서버 실행 및 API 테스트

#### 작업 내용
```bash
# 백엔드 서버 실행
cd backend
uvicorn app.main:app --reload

# 새 터미널에서 API 테스트
curl "http://localhost:8000/api/v1/buildings"
curl "http://localhost:8000/api/v1/geofences?lat=37.4979&lng=127.0276&radius=1000"
curl "http://localhost:8000/api/v1/pois?lat=37.4979&lng=127.0276&radius=100"
```

#### 확인 사항
- [ ] 백엔드 서버 정상 실행
- [ ] 모든 API 엔드포인트 정상 동작
- [ ] 테스트 데이터 정상 조회
- [ ] CORS 설정 확인

---

### 5. 프론트엔드 개발 서버 실행 및 통합 테스트

#### 작업 내용
```bash
# 프론트엔드 개발 서버 실행
cd frontend
npm run dev
```

#### 테스트 시나리오

**시나리오 1: 실외 네비게이션**
1. 브라우저에서 `http://localhost:3000/ar-nav/select` 접속
2. 목적지 선택 (예: 강남역)
3. AR 네비게이션 시작
4. 실외 네비게이션 정상 동작 확인

**시나리오 2: 실내 진입 감지**
1. 목적지를 테스트 백화점 내부로 설정
2. 건물 근처로 이동 (GPS 시뮬레이션)
3. 지오펜스 진입 감지 확인
4. 실내 모드 전환 확인
5. "🏢 실내 모드" 배지 표시 확인

**시나리오 3: 실내 네비게이션**
1. 실내 모드에서 AR 행동 지시 확인
2. POI 인식 및 표시 확인
3. 실내 위치 추정 동작 확인

---

### 6. 실제 기기 테스트 준비

#### 작업 내용
1. **HTTPS 설정** (GPS API 요구사항)
   ```bash
   # ngrok 사용
   ngrok http 3000
   
   # 또는 localtunnel 사용
   npx localtunnel --port 3000
   ```

2. **모바일 기기 접속**
   - HTTPS URL을 모바일 브라우저에서 열기
   - 카메라 권한 요청 확인
   - GPS 권한 요청 확인

3. **디버깅**
   - Chrome DevTools 원격 디버깅
   - 콘솔에서 `debugARNav()` 실행

---

## 🔧 추가 개선 사항

### 즉시 가능한 작업
1. **에러 핸들링 강화**
   - SCQ Units 실패 시 fallback 로직
   - 네트워크 오류 처리

2. **로깅 개선**
   - SCQ 실행 로그 추가
   - 성능 메트릭 수집

3. **UI 개선**
   - 실내 모드 전환 애니메이션
   - POI 목록 스크롤 개선

### 향후 개선 사항
1. **실내 맵 편집 도구**
   - 웹 기반 맵 편집기
   - 건물/구역/랜드마크 추가/수정

2. **VPS 통합**
   - ARCore Geospatial API
   - 실내 위치 추정 정확도 향상

3. **AR 렌더링**
   - Three.js 기반 AR 오버레이
   - 3D 화살표 및 안내 표시

---

## 📊 진행 상황

### 완료된 단계
- [x] 1. 데이터베이스 마이그레이션
- [x] 2. 백엔드 의존성 설치
- [ ] 3. 테스트 데이터 생성
- [ ] 4. 백엔드 서버 실행 및 API 테스트
- [ ] 5. 프론트엔드 통합 테스트
- [ ] 6. 실제 기기 테스트

---

## 🎯 즉시 실행 가능한 명령어

### 테스트 데이터 생성
```bash
cd backend
python app/database/seed_scq_data.py
```

### 백엔드 서버 실행
```bash
cd backend
uvicorn app.main:app --reload
```

### 프론트엔드 개발 서버 실행
```bash
cd frontend
npm run dev
```

### API 테스트
```bash
# 지오펜스 조회
curl "http://localhost:8000/api/v1/geofences?lat=37.4979&lng=127.0276&radius=1000"

# POI 조회
curl "http://localhost:8000/api/v1/pois?lat=37.4979&lng=127.0276&radius=100"
```

---

**다음 작업**: 테스트 데이터 생성 및 통합 테스트

